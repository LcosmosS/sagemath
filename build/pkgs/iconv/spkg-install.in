# Only build iconv on Solaris and HP-UX. See
#     https://github.com/sagemath/sage/issues/8567 and
#     https://github.com/sagemath/sage/issues/9603
# for details.

case "$UNAME" in
HP-UX|SunOS)
    echo "iconv will be installed as the operating system is HP-UX or Solaris."
    echo "These systems either lack iconv, or do not have a sufficiently capable"
    echo "version of iconv. See:"
    echo "    https://github.com/sagemath/sage/issues/8567"
    echo "    https://github.com/sagemath/sage/issues/9603"

    cd src

    sdh_configure $ICONV_CONFIGURE
    sdh_make
    sdh_make_install
    exit 0
    ;;
*)  # Not HP-UX or SunOS (Solaris)
    echo "iconv will not be installed, as we only need to build it on"
    echo "Solaris and HP-UX as the system's iconv will be used"
    echo "on other platforms, rather than the one shipped with Sage."
    echo "See:"
    echo "    https://github.com/sagemath/sage/issues/8567"
    echo "    https://github.com/sagemath/sage/issues/9603"
    exit 0
esac

# NOT REACHED
