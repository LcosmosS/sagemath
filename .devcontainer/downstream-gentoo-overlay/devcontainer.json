// See https://aka.ms/devcontainer.json for format details.
{
    "name": "gentoo overlay 'sage-on-gentoo' downstream Sage (â‰¥ 8-core)",
    "image": "sheerluck/sage-on-gentoo-stage4:latest-py11",
    "onCreateCommand": "mkdir -p /etc/portage/sets && ln -s /var/db/repos/sage-on-gentoo/sets/sagemath /etc/portage/sets/sagemath && mkdir -p /etc/portage/package.accept_keywords && ln -s /var/db/repos/sage-on-gentoo/package.keywords/sage-9999 /etc/portage/package.accept_keywords/sage && mkdir -p /etc/portage/package.use && ln -s /var/db/repos/sage-on-gentoo/package.use/sage /etc/portage/package.use/sage && echo 'sci-mathematics/sage jmol' >> /etc/portage/package.use/sage && emerge -DNut --with-bdeps=y --complete-graph=y --autounmask-write --autounmask @sagemath $(build/bin/sage-get-system-packages gentoo _bootstrap _prereq python3 git pytest pytest_xdist github_cli notebook pip)",
    // There's no SAGE_LOCAL, so remove the symlink 'prefix'.
    "updateContentCommand": "rm -f prefix && ln -sf /usr venv",
    "extensions": [
        "ms-python.python"
    ]
}
